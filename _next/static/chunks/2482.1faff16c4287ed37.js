"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2482],{34901:(t,e,i)=>{i.d(e,{Ay:()=>n,EX:()=>a,Ho:()=>r,WB:()=>o,lH:()=>s});let r={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},a={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},o=30,s=166,n={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${o}px`,minWidth:`${s}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},74789:(t,e,i)=>{i.d(e,{Gn:()=>s,Ve:()=>p,WZ:()=>h,Xc:()=>l,r_:()=>n});var r=i(34901),a=i(16361),o=i(60109);let s=(t,e,i=[],r=0)=>{let[s]=t.split(a.QB),n=`${s}${a.QB}`,l=i.find(t=>t.startsWith(n))||"",{componentWindow:p}=e?.[l]||{},{x:h=0,y:d=0,width:u=0,height:m=0}=p?.getBoundingClientRect()||{};return!(h+r+u>(0,o.e8)()||d+r+m>(0,o.Bv)())&&(h||d)?{x:h+r,y:d+r}:void 0},n=({height:t,width:e})=>{let[i,r]=[(0,o.Bv)(),(0,o.e8)()];return{x:Math.floor(r/2-(0,o.kl)(e)/2),y:Math.floor((i-a.D5)/2-(0,o.kl)(t)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:0},p=(t,e,i=!1)=>{let{position:r,size:a}=t||{},{x:s=0,y:n=0}=r||{},{height:p=0,width:h=0}=a||{};return i?s+l.RIGHT>e.x||s+(0,o.kl)(h)-l.LEFT<0||n+l.BOTTOM>e.y||n+l.TOP<0:s<0||n<0||s+(0,o.kl)(h)>e.x||n+(0,o.kl)(p)>e.y},h=(t,e)=>{let i=Number(t.height-50),s=Number(t.width),[n,l]=[(0,o.Bv)(),(0,o.e8)()],p=n-a.D5-15,h=Math.max(r.WB,Math.min(i,p)),d=Math.max(r.lH,Math.min(s,l));if(!e)return{height:h,width:d};let u=i===h,m=s===d;return u||m?u?m?{height:h,width:d}:{height:Math.round(h/(s/d)),width:d}:{height:h,width:Math.round(d/(i/h))}:i>s?{height:h,width:Math.round(d/(p/h))}:{height:Math.round(h/(l/d)),width:d}}},92482:(t,e,i)=>{i.d(e,{Cg:()=>l,G9:()=>b,Lz:()=>m,OM:()=>c,Ol:()=>E,QP:()=>u,Zl:()=>T,b3:()=>x,bz:()=>h,createM3uPlaylist:()=>k,d7:()=>D,eu:()=>g,hN:()=>S,p3:()=>_,tracksFromPlaylist:()=>M,u7:()=>w,yK:()=>d});var r=i(74789),a=i(16361),o=i(60109);let s=new Set(["Flexi - alien fish pond","Geiss - Spiral Artifact"]),n=`${a.yZ}/Music/Skins`,l={availableSkins:[{name:"Aqua X",url:`${n}/Aqua_X.wsz`},{name:"Nucleo NLog v2G",url:`${n}/Nucleo_NLog_v102.wsz`},...["localhost",a.sx.author.url.replace("https://","")].includes(window.location.hostname)?[{defaultName:"Random (Winamp Skin Museum)",loading:!1,get name(){let t;if(this.loading)return this.defaultName;return this.loading=!0,fetch("https://api.webamp.org/graphql",{body:JSON.stringify({query:(t=Math.floor(1e3*Math.random()),`
  query {
    skins(filter: APPROVED, first: 1, offset: ${t}) {
      nodes {
        download_url
      }
    }
  }
`)}),headers:{"Content-Type":"application/json"},method:"POST"}).then(async t=>{let{data:e}=await t.json()||{};this.skinUrl=e?.skins?.nodes?.[0]?.download_url,this.loading=!1}),this.defaultName},skinUrl:"",get url(){return this.skinUrl||`${n}/base-2.91.wsz`}}]:[],{name:"SpyAMP Professional Edition v5",url:`${n}/SpyAMP_Professional_Edition_v5.wsz`}]},p={height:116,width:275},h="#main-window",d="#playlist-window",u=(t,e="")=>t.skinIsLoaded().then(()=>{e&&(0,o.E)(e)}),m=t=>t.store.dispatch({type:"CLOSE_WINDOW",windowId:"equalizer"}),c=t=>t.store.dispatch({open:!1,type:"ENABLE_MILKDROP"}),w=(t,e)=>t.store.dispatch({data:e,type:"SET_SKIN_DATA"}),f=t=>{let{presetHistory:e=[],presets:i=[]}=t.store.getState()?.milkdrop||{},r=Math.floor(Math.random()*i.length),a=i[r];return!a.name||s.has(a.name)||e.slice(-5).includes(r)?f(t):r},g=t=>{let e=f(t);t.store.dispatch({addToHistory:!0,index:e,type:"PRESET_REQUESTED"}),t.store.dispatch({index:e,type:"SELECT_PRESET_AT_INDEX"})},y=0,b=t=>{let e=t.store.subscribe(()=>{let{milkdrop:r,windows:a}=t.store.getState();a?.genWindows?.milkdrop?.open&&!r?.butterchurn&&(0,o.aY)(["/Apps/Webamp/butterchurn.min.js"]).then(()=>{let r;if(!window.butterchurn?.default)return;r=window.butterchurn.default,t.store.dispatch({butterchurn:r,type:"GOT_BUTTERCHURN"});let{playlist:o,main:s}=a.genWindows||{},{x:n=0,y:l=0}=(o?.open?o?.position:s?.position)||{};t.store.dispatch({positions:{milkdrop:{x:n,y:l+p.height}},type:"UPDATE_WINDOW_POSITIONS"}),e(),t.store.subscribe(()=>{let t=[...document.body.children].find(t=>t.classList?.contains("webamp-desktop"));if(t){let e=document.querySelector("main");e&&([...e.children].forEach(t=>{t.classList?.contains("webamp-desktop")&&t.remove()}),e.append(t))}}),i.e(2756).then(i.t.bind(i,2354,23)).then(({default:e})=>{let i=Object.entries(e).map(([t,e])=>({name:t,preset:e}));t.store.dispatch({presets:i,type:"GOT_BUTTERCHURN_PRESETS"}),g(t),(t=>{window.clearInterval(y),y=window.setInterval(()=>{t||window.clearInterval(y),g(t)},2e4)})(t)})})})},x=()=>document.querySelector("#webamp"),T=(t,e)=>{let{height:i,width:a}=p,{x:o,y:s}=e||(0,r.r_)({height:2*i,width:a});t.store.dispatch({positions:{main:{x:o,y:s},milkdrop:{x:0-a,y:0-i},playlist:{x:o,y:i+s}},type:"UPDATE_WINDOW_POSITIONS"})},S=(t,e)=>t.store.dispatch({type:"SET_FOCUSED_WINDOW",window:e}),E=t=>t.store.dispatch({type:"SET_FOCUSED_WINDOW",window:""}),_=async(t,e)=>{let{parseBuffer:r}=await Promise.all([i.e(6447),i.e(2033)]).then(i.bind(i,62033)),{common:{album:s="",artist:n="",title:l=e},format:{duration:p=0}}=await r(t,{mimeType:a.fq,size:t.length},{duration:!0,skipCovers:!0,skipPostHeaders:!0});return{blob:(0,o.vJ)(t,"audio/mpeg"),duration:Math.floor(p),metaData:{album:s,artist:n,title:l}}},k=t=>{let e=t.map(t=>{let e=t.url?`
${t.url.toString()}`:"",i=t.defaultName;return t.metaData?.artist?t.metaData?.title?i=`${t.metaData.artist} - ${t.metaData.title}`:i&&(i=`${t.metaData.artist} - ${i}`):t.metaData?.title&&(i=t.metaData.title),e?`#EXTINF:${t.duration??-1},${i||""}${e}`:""});return`${["#EXTM3U",...e.filter(Boolean)].join("\n")}
`},M=async(t,e,r)=>{let{ASX:a,M3U:o,PLS:s}=await i.e(1126).then(i.t.bind(i,11126,23));return(({".asx":a,".m3u":o,".pls":s})[e]?.parse(t).filter(Boolean).slice(0,1e3)??[]).map(({artist:t="",file:e="",length:i=0,title:a=""})=>{let[o,s]=[t.trim(),a.trim()];return{duration:Math.max(i,0),metaData:{album:s||r,artist:o,title:s},url:e}})},N=(t="")=>t.replace(/<!\[CDATA\[|\]\]>/g,""),O={"somafm.com":t=>async()=>{let{pathname:e}=new URL(t),[i]=e.replace("/","").split("-"),r=await (await fetch(`https://somafm.com/songs/${i}.xml`,{cache:"no-cache",credentials:"omit",keepalive:!1,mode:"cors",referrerPolicy:"no-referrer",window:null})).text(),a=new DOMParser().parseFromString(r,"application/xml").querySelector("song"),o=a?.querySelector("artist")?.innerHTML,s=a?.querySelector("title")?.innerHTML;return{artist:N(o),title:N(s)}}},D=t=>{let{host:e}=new URL(t),[,i,r]=e.split(".");return O[`${i}.${r}`]?.(t)}}}]);