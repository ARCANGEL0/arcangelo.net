"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876,3010,7341],{2435:(e,t,a)=>{a.d(t,{A:()=>s});var n=a(14232),r=a(42771),i=a(91372),l=a(16361);let s=e=>{let{title:t}=(0,r.N)(),[a]=e.split(l.QB),{title:s}=i.A[a]||{};return{appendFileToTitle:(0,n.useCallback)((a,n)=>{let r=a?` - ${a}${n?` ${l.g6}`:""}`:"";t(e,`${s}${r}`)},[e,s,t]),prependFileToTitle:(0,n.useCallback)((a,n,r)=>{let i=a?`${n?`${l.g6} `:""}${a}${r?" ":" - "}`:"";t(e,`${i}${s}`)},[e,s,t])}}},30876:(e,t,a)=>{a.d(t,{addEntryToZippable:()=>o,addFileToZip:()=>u,createZippable:()=>s,isFileInZip:()=>f,unarchive:()=>w,unzip:()=>c,zipAsync:()=>d});var n=a(79052),r=a(60109),i=a(16361),l=a(82909).Buffer;let s=(e,t)=>e.split("/").reduceRight((e,t)=>({[t]:e}),[t,i.X8]),o=(e,t)=>{let[[a,n]]=Object.entries(t);return e[a]=a in e?o(e[a],t[a]):n,e},c=e=>new Promise((t,n)=>{a.e(1071).then(a.bind(a,21071)).then(({unzip:a})=>a(e,(e,a)=>e?n(e):t(a)))}),d=(e,t=i.X8)=>new Promise((n,r)=>{a.e(1071).then(a.bind(a,21071)).then(({zip:a})=>a(e,t,(e,t)=>e?r(e):n(t)))}),u=async(e,t,a,n)=>l.from(await d(o(e.length>0&&await c(e)||{},s(a,await n(t))))),f=(e,t)=>new Promise((n,r)=>{a.e(1071).then(a.bind(a,21071)).then(({unzip:a})=>a(e,(e,a)=>e?r(e):n(Object.keys(a).includes(t))))}),w=async(e,t)=>{if(window.SevenZip||await (0,r.aY)(["System/7zip/7zz.es6.js"]),!window.SevenZip)return{};let a=await window.SevenZip(),i=(0,n.basename)(e),s=(0,n.join)("/",(0,n.basename)(e,(0,n.extname)(e)));a.FS.mkdir(s),a.FS.chdir(s);let o=a.FS.open(i,"w+");a.FS.write(o,t,0,t.length),a.FS.close(o),a.callMain(["-y","x",i]);let c=a.FS.readdir(s),d=e=>(t,r)=>{if([".","..",i].includes(r))return t;let o=(0,n.join)(e,r),c=o.replace(s,"");try{a.FS.chmod(o,511)}catch{}return Object.assign(t,a.FS.isDir(a.FS.stat(o).mode)?{[(0,n.join)(c,"/")]:l.from(""),...a.FS.readdir(o).reduce(d(o),{})}:{[c]:a.FS.readFile(o,{flags:"r"})}),t};return c.reduce(d(s),{})}},35144:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(37876),r=a(14232),i=a(43010),l=a(78011),s=a(42771);let o=(0,r.memo)(({id:e,useHook:t,StyledComponent:a,children:o})=>{let{processes:{[e]:{url:c=""}={}}}=(0,s.N)(),d=(0,r.useRef)(null),[u,f]=(0,r.useState)(!0),w=(0,r.useMemo)(()=>({contain:"strict",visibility:u?"hidden":"visible"}),[u]);return t({containerRef:d,id:e,loading:u,setLoading:f,url:c}),(0,n.jsxs)(n.Fragment,{children:[u&&(0,n.jsx)(i.default,{}),(0,n.jsx)(a,{ref:d,style:w,...(0,l.A)({id:e}),children:o})]})})},37341:(e,t,a)=>{a.r(t),a.d(t,{default:()=>E});var n=a(37876),r=a(77232),i=a(79572);let l=r.default.div`
  &.drop {
    ${(0,i.A)("Drop rom file here","#f1f1f1")};
  }
`;var s=a(79052),o=a(14232),c=a(99818),d=a(68667),u=a(2435),f=a(46711),w=a(42771),m=a(16361),p=a(60109),S=a(30876),h=a(82909).Buffer;let b=({containerRef:e,id:t,loading:a,setLoading:n,url:r})=>{let{exists:i,mkdirRecursive:l,readFile:b,updateFolder:v,writeFile:E}=(0,f.f)(),y=(0,d.A)(),{linkElement:$,processes:{[t]:{closing:g=!1,libs:j=[]}={}}={}}=(0,w.N)(),{prependFileToTitle:A}=(0,u.A)(t),F=(0,o.useRef)(),_=(0,o.useRef)(""),J=(0,o.useCallback)(async()=>{let t;if(!r)return;if(e.current?.classList.remove("drop"),_.current){if(_.current!==r){_.current="";try{window.EJS_terminate?.()}catch{}if(e.current){let t=document.createElement("div");t.id="emulator",[...e.current.children].forEach(e=>e.remove()),e.current.append(t),J()}}return}_.current=r,window.EJS_gameName=(0,s.basename)(r,(0,s.extname)(r));let[a,{core:o="",zip:d=!1}={}]=(t=(0,p.uQ)(r),Object.entries(c.W).find(([,{ext:e}])=>e.includes(t))||[]),u=await b(r);window.EJS_gameUrl=(0,p.Zd)(d?h.from(await (0,S.zipAsync)({[(0,s.basename)(r)]:u})):u),window.EJS_core=o;let f=`${(0,s.basename)(r)}.sav`,w=(0,s.join)(m.Sb,f);window.EJS_onGameStart=({detail:{emulator:e}})=>{(async()=>{await i(w)&&e.loadState?.(await b(w)),n(!1),y(window.FS,"EmulatorJs"),F.current=e})()},window.EJS_onSaveState=({screenshot:e,state:t})=>{window.EJS_terminate?.();let a=async()=>{if(await i(m.Sb)||await l(m.Sb),await E(w,h.from(t),!0)){let t=(0,s.join)(m.jv,m.Sb),a=(0,s.join)(m.jv,`${w}${m.V9}`);await i(t)||(await l(t),v((0,s.dirname)(m.Sb))),await E(a,h.from(e),!0),v(m.Sb,f)}};t&&a()},window.EJS_player="#emulator",window.EJS_biosUrl="",window.EJS_pathtodata="Apps/EmulatorJs/",window.EJS_startOnLoaded=!0,window.EJS_RESET_VARS=!0,window.EJS_Buttons={cacheManage:!1,loadState:!1,quickLoad:!1,quickSave:!1,saveState:!1,screenRecord:!1,screenshot:!1},await (0,p.aY)(j,void 0,!0),A(`${window.EJS_gameName} (${a})`)},[e,i,j,l,y,A,b,n,v,r,E]);(0,o.useEffect)(()=>{r?J():(n(!1),y(window.FS,"EmulatorJs"),e.current?.classList.add("drop"))},[e,J,y,n,r]),(0,o.useEffect)(()=>{if(!a){let a=e.current?.querySelector("canvas");a instanceof HTMLCanvasElement&&$(t,"peekElement",a)}return()=>{!a&&g&&F.current?.elements.buttons.saveState?.click()}},[g,e,t,$,a])};var v=a(35144);let E=({id:e})=>(0,n.jsx)(v.A,{StyledComponent:l,id:e,useHook:b,children:(0,n.jsx)("div",{id:"emulator"})})},43010:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(77232);let r=n.default.div`
  cursor: wait;
  height: 100%;
  width: 100%;

  &::before {
    color: #fff;
    content: "L o a d i n g ...";
    display: flex;
    font-size: 12px;
    justify-content: center;
    mix-blend-mode: difference;
    padding-top: 18px;
  }
`},68667:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(14232),r=a(46711);let i=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:a}=(0,r.f)(),i=(0,n.useRef)();return(0,n.useEffect)(()=>()=>{if(i.current){let e=i.current;i.current="",t(e,!0).then(()=>a("/",void 0,e)).catch(()=>{})}},[t,a]),(0,n.useCallback)(async(t,n)=>{if(!t)return;let r="";try{r=await e(t,n)}catch{}r&&(a("/",r),i.current=r)},[e,a])}},78011:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(79052),r=a(14232),i=a(49697),l=a(84966),s=a(54188),o=a(46711),c=a(42771),d=a(70185),u=a(16361),f=a(60109),w=a(17786);let m=({callback:e,directory:t=u.Bn,id:a,onDragLeave:m,onDragOver:p,updatePositions:S})=>{let{url:h}=(0,c.N)(),b=(0,w.w)(),{iconPositions:v,sortOrders:E,setIconPositions:y}=(0,d.w)(),{exists:$,mkdirRecursive:g,updateFolder:j,writeFile:A}=(0,o.f)(),F=(0,r.useCallback)(async(e,t,r)=>{if(a)if(t){let i=(0,n.join)(u.Bn,e);if(await g(u.Bn),await A(i,t,!0))return r===s.z.UPDATE_URL&&h(a,i),j(u.Bn,e),(0,n.basename)(i)}else r===s.z.UPDATE_URL&&h(a,e);return""},[a,g,j,h,A]),{openTransferDialog:_}=(0,i.A)();return{onDragLeave:m,onDragOver:e=>{p?.(e),(0,f.CH)(e)},onDrop:r=>{if(u.jj.has((0,f.uQ)(t)))return;if(S&&r.target instanceof HTMLElement){let{files:e,text:a}=(0,l.bn)(r);if(0===e.length&&""===a)return;(async()=>{let i={x:r.clientX,y:r.clientY},l=[];if(a){try{l=JSON.parse(a)}catch{}if(!Array.isArray(l))return;let[e]=l;if(!e||e.startsWith(t)&&(0,n.basename)(e)===(0,n.relative)(t,e))return;l=l.map(e=>(0,n.basename)(e))}else l=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);l=await Promise.all(l.map(async e=>{let a=`${t}/${e}`;if(!v[a]||!await $(a))return e;let r=0;do r+=1,a=`${t}/${(0,n.basename)(e,(0,n.extname)(e))} (${r})${(0,n.extname)(e)}`;while(v[a]&&await $(a));return(0,n.basename)(a)})),(0,f.$Y)(t,r.target,v,E,i,l,y,$)})()}let i="string"==typeof a;i&&!S&&t===u.Bn&&b.current[a]?.componentWindow?.focus(u.VD),(0,l.nX)(r,e||F,t,_,i)}}}},79572:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(77232);let r=(e,t)=>(0,n.css)`
  &::before {
    color: ${t};
    content: "${e}";
    display: flex;
    font-size: 16px;
    font-weight: 600;
    height: 100%;
    left: 0;
    place-content: center;
    place-items: center;
    position: absolute;
    top: 0;
    width: 100%;
  }
`}}]);