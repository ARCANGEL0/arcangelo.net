"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3010,4629],{2435:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(14232),r=a(42771),n=a(91372),s=a(16361);let l=e=>{let{title:t}=(0,r.N)(),[a]=e.split(s.QB),{title:l}=n.A[a]||{};return{appendFileToTitle:(0,i.useCallback)((a,i)=>{let r=a?` - ${a}${i?` ${s.g6}`:""}`:"";t(e,`${l}${r}`)},[e,l,t]),prependFileToTitle:(0,i.useCallback)((a,i,r)=>{let n=a?`${i?`${s.g6} `:""}${a}${r?" ":" - "}`:"";t(e,`${n}${l}`)},[e,l,t])}}},4629:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var i=a(37876),r=a(77232);let n=r.default.div`
  canvas {
    background-color: #000;
  }

  div {
    font-family: "Liberation Mono", "DejaVu Sans Mono", "Courier New", monospace;
    font-size: 14px;
    font-weight: 700;
    line-height: normal;
    position: relative;
    white-space: pre;
  }
`;var s=a(79052),l=a(14232);let o={autostart:!0,bios:{url:"/Apps/Virtual x86/bios/seabios.bin"},log_level:0,network_relay_url:"wss://relay.widgetry.org/",vga_bios:{url:"/Apps/Virtual x86/bios/vgabios.bin"},wasm_path:"/Apps/Virtual x86/v86.wasm"},c=".bin.save",u=new Set([160,180,200,320,360,400,720,1200,1440,1722,2880]);var h=a(67718),d=a(60109);let p="screen-set-size-graphical",f="screen-set-size-text";var m=a(2435),b=a(46711),g=a(30690),w=a(42771),x=a(70185),v=a(16361),y=a(82909).Buffer;window.DEBUG=!1;let _=({containerRef:e,id:t,loading:a,setLoading:i,url:r})=>{let{processes:{[t]:n}}=(0,w.N)(),{foregroundId:_}=(0,x.w)(),{closing:$,libs:k=[]}=n||{},{appendFileToTitle:S}=(0,m.A)(t),z=(0,l.useRef)(!1),[j,B]=(0,l.useState)({}),{exists:C,mkdirRecursive:A,readFile:T,updateFolder:E,writeFile:L}=(0,b.f)(),M=(0,l.useCallback)(e=>new Promise((t,a)=>{j[e]?.save_state().then(t).catch(a)}),[j]),R=(0,l.useCallback)(async(e,t)=>{let a=`${(0,s.basename)(e)}${c}`;await C(v.Sb)||(await A(v.Sb),E((0,s.dirname)(v.Sb)));let i=(0,s.join)(v.Sb,a);if(await L(i,y.from(await M(e)),!0)){if(t){let e=(0,s.join)(v.jv,v.Sb),a=(0,s.join)(v.jv,`${i}${v.V9}`);await C(e)||(await A(e),E((0,s.dirname)(v.Sb))),await L(a,t,!0)}E(v.Sb,a)}try{j[e]?.destroy()}catch{}},[j,C,A,M,E,L]),H=(0,l.useCallback)(async()=>{var t;let[a]=Object.keys(j);"string"==typeof a&&(await R(a),B({[r]:void 0}));let i=r?await T(r):y.from(""),n=(0,d.uQ)(r),l=".iso"===n,h=(0,d.Zd)(i),p={[l?"cdrom":(t=i.length,".bin"===n?"bzimage":(e=>u.has(e>>10)&&(1023&e)==0||512===e)(t)?"fda":"hda")]:{async:!1,size:i.length,url:h,use_parts:!1}},{deviceMemory:f=.25}=navigator,m={boot_order:l?531:561,memory_size:128*f*1048576,screen_container:e.current,vga_memory_size:8*f*1048576,...p,...o},b=(0,s.join)(v.Sb,`${(0,s.basename)(r)}${c}`),w=await C(b)?(0,d.Zd)(await T(b)):void 0;w&&(m.initial_state={url:w}),m.filesystem={basefs:URL.createObjectURL(new Blob([JSON.stringify((0,g.hf)())],{type:"application/json"})),baseurl:window.location?.origin??"/"};let x=new window.V86Starter(m);x.add_listener("emulator-loaded",()=>{if(z.current)return void x.destroy();S((0,s.basename)(r)),(0,d.E)(h),m.initial_state&&(0,d.E)(m.initial_state.url),m.filesystem&&(0,d.E)(m.filesystem.basefs),e.current?.addEventListener("click",x.lock_mouse),B({[r]:x})})},[S,R,e,j,C,T,r]);((e,t,a)=>{let{updateWindowSize:i}=(0,h.A)(e);(0,l.useEffect)(()=>{let e=([e,a])=>{let r=t.current?.querySelector("canvas");r?.style.height&&r?.style.width?i((0,d.kl)(r?.style.height),(0,d.kl)(r?.style.width)):i(a,e)},r=([,e])=>{let{height:a,width:r}=t.current?.querySelector("span:last-of-type")?.getBoundingClientRect()||{};a&&r&&i(e*a,r)};return a?.add_listener(p,e),a?.add_listener(f,r),()=>{a?.remove_listener(p,e),a?.remove_listener(f,r)}},[a,t,i])})(t,e,j[r]),(0,l.useEffect)(()=>{a&&(0,d.aY)(k).then(()=>{window.V86Starter&&i(!1)})},[k,a,i]),(0,l.useEffect)(()=>{let e=_===t;Object.values(j).forEach(t=>t?.keyboard_set_status(e))},[j,_,t]),(0,l.useEffect)(()=>{!n||$||a||r in j||H();let t=e.current;return()=>{if($&&!z.current)if(z.current=!0,r&&j[r]){let e=e=>{window.setTimeout(()=>R(r,e),v.UW.WINDOW)};(async()=>{let e;if(j[r]?.v86.cpu.devices.vga.graphical_mode)e=t?.querySelector("canvas")?.toDataURL("image/png");else if(t instanceof HTMLElement){let a=await (0,d.em)();try{e=await a?.toPng(t,{skipAutoScale:!0})}catch{}}return e?y.from(e.replace("data:image/png;base64,",""),"base64"):void 0})().then(e).catch(e)}else j[r]?.destroy()}},[R,$,e,j,H,a,n,r])};var $=a(35144);let k=({id:e})=>(0,i.jsxs)($.A,{StyledComponent:n,id:e,useHook:_,children:[(0,i.jsx)("div",{onContextMenuCapture:d.CH}),(0,i.jsx)("canvas",{onContextMenuCapture:d.CH})]})},34901:(e,t,a)=>{a.d(t,{Ay:()=>l,EX:()=>r,Ho:()=>i,WB:()=>n,lH:()=>s});let i={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},r={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},n=30,s=166,l={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${n}px`,minWidth:`${s}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},35144:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(37876),r=a(14232),n=a(43010),s=a(78011),l=a(42771);let o=(0,r.memo)(({id:e,useHook:t,StyledComponent:a,children:o})=>{let{processes:{[e]:{url:c=""}={}}}=(0,l.N)(),u=(0,r.useRef)(null),[h,d]=(0,r.useState)(!0),p=(0,r.useMemo)(()=>({contain:"strict",visibility:h?"hidden":"visible"}),[h]);return t({containerRef:u,id:e,loading:h,setLoading:d,url:c}),(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsx)(n.default,{}),(0,i.jsx)(a,{ref:u,style:p,...(0,s.A)({id:e}),children:o})]})})},43010:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var i=a(77232);let r=i.default.div`
  cursor: wait;
  height: 100%;
  width: 100%;

  &::before {
    color: #fff;
    content: "L o a d i n g ...";
    display: flex;
    font-size: 12px;
    justify-content: center;
    mix-blend-mode: difference;
    padding-top: 18px;
  }
`},67718:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(77232),r=a(14232),n=a(74789),s=a(42771),l=a(70185);let o=e=>{let{setWindowStates:t}=(0,l.w)(),{processes:{[e]:{lockAspectRatio:a=!0,maximized:o=!1}={}}={}}=(0,s.N)(),{sizes:{titleBar:c}}=(0,i.useTheme)();return{updateWindowSize:(0,r.useCallback)((i,r)=>t(t=>({...t,[e]:{...t?.[e],maximized:o,size:(0,n.WZ)({height:i+c.height,width:r},a)}})),[e,a,o,t,c.height])}}},74789:(e,t,a)=>{a.d(t,{Gn:()=>s,Ve:()=>c,WZ:()=>u,Xc:()=>o,r_:()=>l});var i=a(34901),r=a(16361),n=a(60109);let s=(e,t,a=[],i=0)=>{let[s]=e.split(r.QB),l=`${s}${r.QB}`,o=a.find(e=>e.startsWith(l))||"",{componentWindow:c}=t?.[o]||{},{x:u=0,y:h=0,width:d=0,height:p=0}=c?.getBoundingClientRect()||{};return!(u+i+d>(0,n.e8)()||h+i+p>(0,n.Bv)())&&(u||h)?{x:u+i,y:h+i}:void 0},l=({height:e,width:t})=>{let[a,i]=[(0,n.Bv)(),(0,n.e8)()];return{x:Math.floor(i/2-(0,n.kl)(t)/2),y:Math.floor((a-r.D5)/2-(0,n.kl)(e)/2)}},o={BOTTOM:15,LEFT:150,RIGHT:50,TOP:0},c=(e,t,a=!1)=>{let{position:i,size:r}=e||{},{x:s=0,y:l=0}=i||{},{height:c=0,width:u=0}=r||{};return a?s+o.RIGHT>t.x||s+(0,n.kl)(u)-o.LEFT<0||l+o.BOTTOM>t.y||l+o.TOP<0:s<0||l<0||s+(0,n.kl)(u)>t.x||l+(0,n.kl)(c)>t.y},u=(e,t)=>{let a=Number(e.height-50),s=Number(e.width),[l,o]=[(0,n.Bv)(),(0,n.e8)()],c=l-r.D5-15,u=Math.max(i.WB,Math.min(a,c)),h=Math.max(i.lH,Math.min(s,o));if(!t)return{height:u,width:h};let d=a===u,p=s===h;return d||p?d?p?{height:u,width:h}:{height:Math.round(u/(s/h)),width:h}:{height:u,width:Math.round(h/(a/u))}:a>s?{height:u,width:Math.round(h/(c/u))}:{height:Math.round(u/(o/h)),width:h}}},78011:(e,t,a)=>{a.d(t,{A:()=>f});var i=a(79052),r=a(14232),n=a(49697),s=a(84966),l=a(54188),o=a(46711),c=a(42771),u=a(70185),h=a(16361),d=a(60109),p=a(17786);let f=({callback:e,directory:t=h.Bn,id:a,onDragLeave:f,onDragOver:m,updatePositions:b})=>{let{url:g}=(0,c.N)(),w=(0,p.w)(),{iconPositions:x,sortOrders:v,setIconPositions:y}=(0,u.w)(),{exists:_,mkdirRecursive:$,updateFolder:k,writeFile:S}=(0,o.f)(),z=(0,r.useCallback)(async(e,t,r)=>{if(a)if(t){let n=(0,i.join)(h.Bn,e);if(await $(h.Bn),await S(n,t,!0))return r===l.z.UPDATE_URL&&g(a,n),k(h.Bn,e),(0,i.basename)(n)}else r===l.z.UPDATE_URL&&g(a,e);return""},[a,$,k,g,S]),{openTransferDialog:j}=(0,n.A)();return{onDragLeave:f,onDragOver:e=>{m?.(e),(0,d.CH)(e)},onDrop:r=>{if(h.jj.has((0,d.uQ)(t)))return;if(b&&r.target instanceof HTMLElement){let{files:e,text:a}=(0,s.bn)(r);if(0===e.length&&""===a)return;(async()=>{let n={x:r.clientX,y:r.clientY},s=[];if(a){try{s=JSON.parse(a)}catch{}if(!Array.isArray(s))return;let[e]=s;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;s=s.map(e=>(0,i.basename)(e))}else s=e instanceof FileList?[...e].map(e=>e.name):[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);s=await Promise.all(s.map(async e=>{let a=`${t}/${e}`;if(!x[a]||!await _(a))return e;let r=0;do r+=1,a=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${r})${(0,i.extname)(e)}`;while(x[a]&&await _(a));return(0,i.basename)(a)})),(0,d.$Y)(t,r.target,x,v,n,s,y,_)})()}let n="string"==typeof a;n&&!b&&t===h.Bn&&w.current[a]?.componentWindow?.focus(h.VD),(0,s.nX)(r,e||z,t,j,n)}}}}}]);